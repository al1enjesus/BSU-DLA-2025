# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ3  
/proc, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ 
–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ–¥ Linux (DLA, 4 –∫—É—Ä—Å)  

## –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–ù–∞—É—á–∏—Ç—å—Å—è –ø–æ–ª—É—á–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ñ–∞–π–ª–æ–≤ `/proc`, —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∏—Ö —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏ (`ps`, `top`) –∏ –æ—Å–≤–æ–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏—ë–º—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (`strace`, `perf`). 

## –ò—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

- –û–°: Ubuntu 20.04 (WSL2)
- Python: 3.8.2
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã: `ps`, `top`, `pidstat`, `strace`, `perf`
- –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `~/BSU-DLA-2025/lab3/gr1sub2/Vorobeva_Ulyana`
- –°–∫—Ä–∏–ø—Ç—ã:
  - `src/pstat.py` ‚Äî —á—Ç–µ–Ω–∏–µ `/proc/<pid>` –∏ –≤—ã–≤–æ–¥ –º–µ—Ç—Ä–∏–∫
  - `run.sh` ‚Äî –∑–∞–ø—É—Å–∫ `pstat` –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å `ps`, `top`, `strace`

## –•–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 1. –ó–∞–ø—É—Å–∫ —É—Ç–∏–ª–∏—Ç—ã

–ö–æ–º–∞–Ω–¥–∞:
```bash
./run.sh
```

–¢–∞–∫ –∫–∞–∫ PID –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è, —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `PID=$$` ‚Äî
—Ç–æ –µ—Å—Ç—å **PID —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ Bash**, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `run.sh`.


### 2. –í—ã–≤–æ–¥ —É—Ç–∏–ª–∏—Ç—ã `pstat`

```
Running pstat for PID 10272
============================
pstat ‚Äî –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞ 10272
============================
PID: 10272
–ö–æ–º–∞–Ω–¥–∞: bash
–°–æ—Å—Ç–æ—è–Ω–∏–µ: S
PPID: 9650
utime: 0
stime: 0
RSS (—Å—Ç—Ä–∞–Ω–∏—Ü—ã): 835

--- /proc/[pid]/status ---
Name:   bash
State:  S (sleeping)
Pid:    10272
PPid:   9650
TracerPid:      0
Uid:    1000    1000    1000    1000
VmSize:     7008 kB
VmRSS:      3340 kB

--- /proc/[pid]/cmdline ---
bash ./run.sh 

–ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
```

–ò–∑ —ç—Ç–æ–≥–æ –≤—ã–≤–æ–¥–∞ –≤–∏–¥–Ω–æ:
- –ø—Ä–æ—Ü–µ—Å—Å `bash` —Å–ø–∏—Ç (`State: S`);
- PID: 10272, PPID: 9650;
- RSS (—Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏): 3340 kB (‚âà 3.26 –ú–ë);
- utime/stime = 0 ‚Äî CPU-–≤—Ä–µ–º—è –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ;
- VmSize = 7008 kB ‚Äî –ø–æ–ª–Ω—ã–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞.


### 3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏

#### üîπ `ps`:
```
    PID    PPID S  UTIME STIME   RSS NLWP COMMAND
  10272    9650 S      - 15:18  3588    1 bash
```
RSS ‚âà 3588 kB ‚Äî —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `/proc/<pid>/status` (–ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π –¥–æ–ø—É—Å—Ç–∏–º–∞). 
NLWP = 1 ‚Üí —É `bash` –æ–¥–∏–Ω –ø–æ—Ç–æ–∫.

#### üîπ `top` (—Å—Ä–µ–∑):
```
    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
  10272 ullecses  20   0    7008   3712   3188 S   0.0   0.0   0:00.00 bash
```
RES = 3712 kB ‚âà VmRSS 3340 kB ‚Üí –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç. 
–ü—Ä–æ—Ü–µ—Å—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–Ω–∞ (`S`), CPU 0.0%.

### 4. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### `strace -c`
–í—ã–≤–æ–¥:
```
--- strace -c (short 2s attach; may require root) ---
Skipping strace on current shell to avoid noise
```
–¢–∞–∫ –∫–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å `bash`, 
—Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–ø—É—Å—Ç–∏–ª `strace`, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é.

## –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

1. **–ì–¥–µ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤—Ä–µ–º—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ?** 
   - `/proc/<pid>/stat`: `utime`, `stime`, `state` 
   - `/proc/<pid>/status`: –ø–æ–ª–µ `State:`

2. **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å RSS –∏ —á–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è `RssAnon` –∏ `RssFile`?** 
   - `VmRSS` –∏–∑ `/proc/<pid>/status` ‚Äî –æ–±—â–∏–π –æ–±—ä—ë–º —Ä–µ–∑–∏–¥–µ–Ω—Ç–Ω–æ–π –ø–∞–º—è—Ç–∏. 
   - `RssAnon` ‚Äî –∞–Ω–æ–Ω–∏–º–Ω–∞—è (heap, stack),
     `RssFile` ‚Äî –æ—Ç–æ–±—Ä–∞–∂—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.
   –≠—Ç–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ–º–æ–≥–∞—é—Ç –æ—Ü–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–º—è—Ç–∏.

3. **–ö–∞–∫ –æ—Ü–µ–Ω–∏—Ç—å IO-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ `/proc/<pid>/io`?**
   - –ü–æ–ª—è `read_bytes`, `write_bytes` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –æ–±—ä—ë–º—ã —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏.
   - –í `top` –∏ `pidstat` IO –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è (`%iowait`).

4. **–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –¥–µ–ª–∏—Ç–µ–ª—å `HZ` –∏ –∫–∞–∫ —Å—á–∏—Ç–∞—Ç—å CPU-–≤—Ä–µ–º—è?**
   - `HZ` ‚Äî —á–∏—Å–ª–æ —Ç–∏–∫–æ–≤ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ –≤ —Å–µ–∫—É–Ω–¥—É (–æ–±—ã—á–Ω–æ 100).
   - `CPU time = (utime + stime) / HZ`.

5. **–ü–æ—á–µ–º—É –≤–æ–∑–º–æ–∂–Ω—ã —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É `/proc` –∏ `ps/top`?**
   - –ú–µ—Ç—Ä–∏–∫–∏ —Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–µ–∞—Ç–æ–º–∞—Ä–Ω–æ.
   - –ú–µ–∂–¥—É –º–æ–º–µ–Ω—Ç–∞–º–∏ —á—Ç–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥ –ø–∞–º—è—Ç–∏.

6. **–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `strace -c` –∏ –∫–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å `perf stat`?**
   - `strace -c` –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã –ø–æ —Ç–∏–ø–∞–º –∏ –≤—Ä–µ–º–µ–Ω–∏.
   - `perf stat` –¥–∞—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º —Å–æ–±—ã—Ç–∏—è–º (—Ü–∏–∫–ª—ã, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –≤–µ—Ç–≤–ª–µ–Ω–∏—è).

## –í—ã–≤–æ–¥—ã

- –£—Ç–∏–ª–∏—Ç–∞ `pstat` —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ `/proc` –∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏.
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è **—Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å –æ–±–æ–ª–æ—á–∫–∏ Bash** (`PID=$$`).
- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (`VmRSS`, `PPid`, `State`, `utime/stime`) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è.
- –†–∞–±–æ—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `/proc` –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

 **–ò—Ç–æ–≥:** –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, —É—Ç–∏–ª–∏—Ç–∞ `pstat` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `/proc`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–≥–ª–∞—Å—É—é—Ç—Å—è —Å `ps` –∏ `top`, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á—ë—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º.