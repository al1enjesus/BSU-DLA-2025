# Лабораторная 1 — Bash: анализ логов

## Цель
Закрепить навыки работы с файловой системой и логами Linux с использованием базовых инструментов командной строки: навигация, фильтрация, агрегация, конвейеры.

## Задания

### A) Частотный анализ слов в syslog (TOP‑5)
Подсчитал 5 самых частых “слов” в `/var/log/syslog` с помощью конвейера
```bash
cat /var/log/syslog \
  | tr -cs '[:alnum:]' '\n' \
  | tr '[:upper:]' '[:lower:]' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 5
```
- tr -cs '[:alnum:]' '\n' — разбиение на слова.
- tr '[:upper:]' '[:lower:]' — приведение к нижнему регистру.
- sort | uniq -c — подсчет количества.
- sort -nr | head -n 5 — вывод 5 самых частых.

**Результат** \
  37898 00 \
  35800 09 \
  32726 2025 \
  31630 pclinux \
  29841 03

**Вывод** \
Самые частые слова в файле syslog это числа даты и времени

### Б) Неудачные попытки входа (auth.log)
Использовал команду
```bash
grep -E 'Failed|Invalid' /var/log/auth.log \
  | grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}' \
  | sed -E 's/([0-9]+\.[0-9]+\.[0-9]+\.)[0-9]+/\1x/g' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 10
```
- grep -E 'Failed|Invalid' /var/log/auth.log — поиск строк, содержащих слова Failed или Invalid.
- grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}' — извлечение (-o) всех IP-адресов по шаблону: четыре числа от 1 до 3 цифр, разделенные точками.
- sed -E 's/([0-9]+\.[0-9]+\.[0-9]+\.)[0-9]+/\1x/g' — замена последнего октета IP на x для приватности.
- sort — сортировка IP-адресов.
- uniq -c — подсчет количества вхождений каждого IP. 
- sort -nr — сортировка по убыванию количества.
- head -n 10 — вывод 10 наиболее частых источников.

**Вывод** \
В результате выполнения команды логов найдено не было, а значит неудачных попыток входа также не было

### В) Установки пакетов (dpkg.log)
Использовал команду
```bash
grep ' install ' /var/log/dpkg.log \
  | awk '{print $4}' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 10
```
- grep ' install ' /var/log/dpkg.log — поиск строк, содержащих событие install.
- awk '{print $4}' — вывод четвертого поля (имени пакета) из каждой строки.
- sort — сортировка имен пакетов.
- uniq -c — подсчет количества установок каждого пакета.
- sort -nr — сортировка по убыванию.
- head -n 10 — вывод 10 пакетов с наибольшим числом установок.

**Результат** \
      1 zstd:amd64 \
      1 zlib1g:i386 \
      1 zlib1g:amd64 \
      1 zip:amd64 \
      1 zenity-common:all \
      1 zenity:amd64 \
      1 yelp-xsl:all \
      1 yelp:amd64 \
      1 yaru-theme-sound:all \
      1 yaru-theme-icon:all \
**Вывод** \
Нет пакетов, которые устанавливались многократно, все зафиксированные события — единичные установки стандартных системных компонентов.

**Использование AI** \
AI использовал, чтобы подобрать команды и разобраться в них, а также для проверки корректности регулярных выражений.