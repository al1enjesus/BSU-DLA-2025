# Лабораторная 1 — Bash: анализ логов

## Цель
Короткая практика по работе с файлами логов в Linux с использованием базовых инструментов командной строки.

## Задание А) Частотный анализ слов в syslog (TOP‑5)
Подсчитайте 5 самых частых “слов” в `/var/log/syslog` (нормализуйте регистр, отделяйте слова).

### Решение:
Использовал команду данную в задании:
```bash
cat /var/log/syslog \
  | tr -cs '[:alnum:]' '\n' \
  | tr '[:upper:]' '[:lower:]' \
  | sort \
  | uniq -c \
  | sort -nr \
  | head -n 5
```
Выводы: вывело
```bash
  17015 00
  10886 09
  10575 2025
  10560 miltah
  10542 pulse
```
Наличие последних 4 по частоте очевидно - является датой/временем, именем пользователя и устройства

## Задание Б) Неудачные попытки входа (auth.log)
- Найдите строки с `Failed` или `Invalid` в `/var/log/auth.log`.
- Извлеките IP‑адреса, посчитайте TOP‑10 источников. 
- Замаскируйте последний октет IP (например, `192.168.0.15 → 192.168.0.x`) с помощью `sed`.

### Решение:
Поиск строки с `Failed` или `Invalid` был выполнен с помощью команды
```bash
grep -E "Failed|Invalid" /var/log/auth.log
```
В результате ничего не вывело, ибо вход в систему изначально был успешным, а также не было проблем при работе системы (включая и интернет соединения)
Затем добавил поиск ip адресов и вывод топ 10 по частоте
```bash
grep -E 'Failed|Invalid' /var/log/auth.log | awk '{ for (i=1; i<=NF; i++) if ($i ~ /^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$/) print $i }' | sort | uniq -c | sort -nr | head -n 10
```
Также ничего не вывело по причинам изложенным выше.
Добавил маскировку адресов перед сортировкой, итоговая команда имеет вид:
```bash
grep -E 'Failed|Invalid' /var/log/auth.log | awk '{ for (i=1; i<=NF; i++) if ($i ~ /^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$/) print $i }' | sed -E 's/(\d+\.\d+\.\d+\.)\d+/\1x/g' | sort | uniq -c | sort -nr | head -n 10
```
### Выводы
При работе системы аутентификации, т.к. в командах не было ошибки, также не было ошибок, ибо сам вывод был пустым.

## Задание В) Установки пакетов (dpkg.log)
- По `/var/log/dpkg.log` посчитайте, какие пакеты устанавливались чаще всего (события `install`).
- Выведите TOP‑10 пакетов с количеством установок.

### Решение:
Выполнил задание по аналогии с предыдущим, команда имеет такой вид:
```bash
grep -E 'install' /var/log/dpkg.log | sort |uniq -c | sort -nr | head -n 10
```
### Выводы: 
Команда отработала успешно, в логах можно видеть git, который был установлен в день выполнения (как и сама система), сам вывод, для наглядности:
```bash
      3 2025-08-05 16:48:12 startup archives install
      2 2025-09-19 19:23:23 status installed libgdk-pixbuf-2.0-0:i386 2.42.10+dfsg-3ubuntu3.2
      2 2025-08-05 16:50:21 status unpacked install-info:amd64 7.1-3build2
      2 2025-08-05 16:48:13 status half-installed debconf:all 1.5.86ubuntu1
      2 2025-08-05 16:48:13 startup archives install
      2 2025-08-05 16:48:11 startup archives install
      1 2025-09-22 00:34:23 status installed man-db:amd64 2.12.0-4build2
      1 2025-09-22 00:34:22 status installed liberror-perl:all 0.17029-2
      1 2025-09-22 00:34:22 status installed git-man:all 1:2.43.0-1ubuntu7.3
      1 2025-09-22 00:34:22 status installed git:amd64 1:2.43.0-1ubuntu7.3
```

## Итог
В ходе выполнения лабораторной работы были сделаны основополагающие вещи для работы с линукс (убунту) в виде его установки, установки необходимых компонентов, а также познакомился с работой с логами в терминале.

ИИ был использован для:
- Объяснения принципа работы предложенного конвейера команд
- Для выяснения корректности введённых команд (пункт Б)



