Лабораторная работа 1 — Bash: анализ логов
Студент:Браун Дэннис
Группа: 1
Подгруппа: 
Дата выполнения: 22.09.2025

Среда и данные
ОС: Ubuntu в VirtualBox

Логи для анализа:

/var/log/syslog 

/var/log/auth.log 

/var/log/dpkg.log 

Инструменты
Использованы следующие инструменты командной строки:

cat, head, tail - просмотр логов

grep, grep -E, grep -i - поиск и фильтрация

tr, sed, cut, awk - обработка текста

sort, uniq -c - агрегация данных

| - конвейеры для объединения команд


Задание А: Частотный анализ слов в syslog (TOP-5)
Цель
Подсчитать 5 самых частых слов в syslog с нормализацией регистра.

Выполненные команды
bash
cat /var/log/syslog | tr -cs '[:alnum:]' '\n' | tr '[:upper:]' '[:lower:]' | sort | uniq -c | sort -nr | head -n 5
Результат
text
   8398 00
   5657 09
   5571 virtualbox
   5564 2025
   5563 dennis
Выводы
Наиболее частые слова - временные метки (00, 09), название виртуальной машины и текущий год, и мое имя.

Задание Б: Неудачные попытки входа (auth.log)
Цель
Найти IP-адреса в неудачных попытках входа и замаскировать последний октет.

Выполненные команды
bash
# Поиск IP-адресов в строках с Failed/Invalid
grep -E "(Failed|Invalid)" /var/log/auth.log | grep -oE "[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+" | sort | uniq -c | sort -nr | head -n 10

# Поиск с маскировкой последнего октета
grep -E "(Failed|Invalid)" /var/log/auth.log | grep -oE "[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+" | sed -E 's/([0-9]+\.[0-9]+\.[0-9]+\.)[0-9]+/\1x/g' | sort | uniq -c | sort -nr | head -n 10
Результат
Команды выполнены успешно, но результаты отсутствуют - IP-адресов не обнаружено.

Дополнительный анализ
bash
# Поиск любых ошибок аутентификации
grep -i "authentication failure" /var/log/auth.log | head -3
Результат:

text
2025-09-22T14:12:52.769249+03:00 dennis-VirtualBox gdm-password]: pam_unix(gdm-password:auth): authentication failure; logname=dennis uid=0 euid=0 tty=/dev/tty1 ruser= rhost=  user=dennis

Выводы
В системе зафиксированы только локальные неудачные попытки аутентификации (поле rhost= пустое). Удаленных попыток входа с IP-адресами не обнаружено.

Задание В: Установки пакетов (dpkg.log)
Цель
Определить TOP-10 пакетов по количеству установок.

Выполненные команды
bash
grep "install" /var/log/dpkg.log | awk '{print $4}' | cut -d: -f1 | sort | uniq -c | sort -nr | head -n 10
Результат
text
   1826 installed
   1773 half-installed
     43 not-installed
     12 archives
      4 unpacked
      4 install-info
      4 half-configured
      2 triggers-pending
      2 dracut-install
      1 zstd
Выводы
В логах преобладают статусы установки пакетов, что характерно для процесса обновления системы.

Проблемы и решения
Проблема 1: Отсутствие базовых команд
Симптом: command not found для cat, grep и других команд
Решение: Использование абсолютных путей (/bin/cat, /usr/bin/grep)
Проверка: export PATH=/bin:/usr/bin:$PATH

Проблема 2: Отсутствие IP-адресов в auth.log
Симптом: Команды выполняются, но результатов нет
Анализ: Ошибки аутентификации были только локальными
Решение: Адаптация вывода под реальные данные системы

Использование ИИ
DeepSeek

Помог определить причину отсутствия команд. Предложил использовать абсолютные пути. А также помог скорректировать задания под реальные данные. Интерпретировал отсутствие результатов как валидный вывод(задание Б).


Общие выводы
Система безопасна: Не обнаружено удаленных атак на аутентификацию

Логи корректны: Все файлы доступны и содержат ожидаемые данные

Инструменты освоены: Успешно применены конвейеры Bash для анализа

Методология: Освоен процесс анализа логов с помощью стандартных утилит

Работа демонстрирует эффективное использование инструментов командной строки для анализа системных логов.