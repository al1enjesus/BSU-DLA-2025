# AI Code Review - Lab 6

Этот файл содержит дополнительные инструкции для AI code review специфичные для Lab 6.

## Специфика Lab 6: FUSE файловые системы

### Что проверять дополнительно

1. **Корректность FUSE операций:**
   - Все file operations возвращают корректные коды ошибок (-ENOENT, -EACCES, -EIO)
   - Структура `struct stat` заполнена правильно в `getattr()`
   - `readdir()` вызывает `filler()` для всех файлов включая `.` и `..`
   - Правильная работа с `offset` в `read()`/`write()`

2. **Безопасность FUSE:**
   - Нет path traversal уязвимостей (проверка на `..`, абсолютные пути)
   - Проверка прав доступа перед операциями
   - Корректная обработка символических ссылок
   - Нет buffer overflow при работе с путями

3. **Управление ресурсами:**
   - Все `open()` имеют соответствующий `close()`
   - `opendir()` закрывается через `closedir()`
   - Нет утечек памяти при работе с `malloc()` (если используется)
   - Корректная работа с file descriptors

4. **Тестирование:**
   - Есть базовые тесты (создание, чтение, запись, удаление)
   - Проведено benchmarking (latency, throughput, IOPS)
   - Есть графики сравнения с обычной FS
   - Тесты воспроизводимы

5. **Документация:**
   - Инструкция по монтированию/размонтированию
   - Примеры использования
   - Описание реализованных операций
   - Ответы на контрольные вопросы

### Типичные ошибки студентов

- **Не проверяют errno после syscalls**
- **Не заполняют `st_mode` в getattr для директорий**
- **Забывают добавить `.` и `..` в readdir**
- **Используют абсолютные пути вместо относительных**
- **Не закрывают файлы/директории**
- **Неправильно работают с offset в read/write**
- **Не проверяют границы буфера**

### Вопросы для студента

Хорошие вопросы для понимания материала:

1. Почему вы возвращаете `-errno` вместо `errno`?
2. Как FUSE передает запросы из kernel в userspace?
3. Что произойдет если забыть вызвать `filler()` для `..` в readdir?
4. Почему важен параметр `offset` в read/write?
5. Как вы тестировали concurrent доступ к файлам?
6. Какой overhead вы измерили по сравнению с обычной FS?

### Формат feedback

Используйте те же секции, что указаны в основном `custom_instructions`:
- Критические замечания
- Риски/Безопасность
- Воспроизводимость
- Качество кода
- Вопросы студенту
- Что сделать

Будьте конкретны и давайте примеры кода для исправлений.
