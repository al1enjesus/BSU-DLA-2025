# Лабораторная работа 2 - Продвинутые процессы Linux

**Студент:** Соколов Евгений  
**Группа:** gr1sub1  

## Структура проекта

- `src/` — исходный код супервизора, воркеров и утилиты pstat
- `config.ini` — конфигурационный файл для супервизора
- `run.sh` — скрипт запуска и демонстрации
- `REPORT.md` — подробный отчёт с результатами экспериментов

## Как запустить

### Сборка
```bash
cd src/
make
```

### Запуск супервизора
```bash
./supervisor config.ini
```

### Запуск демонстрации
```bash
bash run.sh
```

## Описание компонентов

### Супервизор
Процесс-родитель, который:
- Порождает N воркеров (по умолчанию 3)
- Обрабатывает сигналы SIGTERM/SIGINT (graceful shutdown)
- Обрабатывает SIGHUP (graceful reload)
- Обрабатывает SIGUSR1/2 (переключение режимов воркеров)
- Следит за воркерами через SIGCHLD и перезапускает при сбоях

### Воркеры
Дочерние процессы, которые:
- Выполняют имитацию нагрузки (work + sleep циклы)
- Поддерживают два режима: тяжёлый и лёгкий
- Обрабатывают сигналы для переключения режимов и корректного завершения
- Выводят диагностическую информацию

### Утилита pstat
Читает информацию из `/proc/<pid>/` и выводит сводку по процессу.

## Конфигурация

Формат `config.ini`:
```ini
workers=3

[mode_heavy]
work_us=9000
sleep_us=1000

[mode_light]
work_us=2000
sleep_us=8000

[scheduling]
nice_values=0,10,0
cpu_affinity=0,1,0
```