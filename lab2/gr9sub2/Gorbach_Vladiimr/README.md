# Supervisor-Worker Project

Это проект на C++, демонстрирующий модель "супервизор-рабочий". Процесс-супервизор управляет несколькими рабочими процессами, включая их запуск, остановку, перезагрузку конфигурации и переключение режимов работы.

## Описание

- **Супервизор (`supervisor.cpp`):**
  - Запускает и останавливает рабочие процессы.
  - Читает конфигурацию из `src/config.yaml`.
  - Управляет жизненным циклом рабочих, перезапуская их в случае сбоя.
  - Обрабатывает сигналы для управления (см. раздел "Использование").
  - Поддерживает различные политики планирования для рабочих.

- **Рабочий (`worker.cpp`):**
  - Выполняет симуляцию работы (чередование периодов активности и сна).
  - Может работать в "тяжелом" (HEAVY) или "легком" (LIGHT) режиме.
  - Периодически выводит свой статус (PID, режим, тик, CPU, nice).

## Зависимости

Для сборки и запуска проекта вам понадобятся:
- `make`
- `g++` (компилятор C++)
- `libyaml-cpp-dev` (библиотека для работы с YAML)

Вы можете установить `libyaml-cpp-dev` в Debian/Ubuntu с помощью команды:
```bash
sudo apt-get update
sudo apt-get install libyaml-cpp-dev
```

## Сборка

Для сборки проекта используйте `Makefile`. Бинарные файлы будут созданы в директории `bin/`.

## Использование

### Запуск
Для компиляции и запуска супервизора выполните:
```bash
make run
```

### Управление через сигналы

Вы можете управлять работающим процессом-супервизором, отправляя ему сигналы с помощью следующих команд:

- **Перезагрузить конфигурацию:**
  ```bash
  make reload
  ```
  Супервизор перезагрузит `src/config.yaml` и перезапустит все рабочие процессы с новой конфигурацией.

- **Переключить в "легкий" режим:**
  ```bash
  make light
  ```

- **Переключить в "тяжелый" режим:**
  ```bash
  make heavy
  ```

- **Завершить работу (SIGINT):**
  ```bash
  make int
  ```

- **Завершить работу (SIGTERM):**
  ```bash
  make term
  ```

### Очистка
Для удаления скомпилированных файлов выполните:
```bash
make clean
```
